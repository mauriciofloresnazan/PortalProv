@using Ppgz.Repository
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";


    var penalizacion = (List<Penalizacionauditor>)ViewBag.penalizacion;
    var fechaDesde = (DateTime)ViewBag.FechaDesde;
    var fechaHasta = (DateTime)ViewBag.FechaHasta;
}
<h2>Penalizaciones Registradas</h2>
<p class="page-description-title"><i class="fa fa-calendar" aria-hidden="true"></i> <i>Registro desde hace 3 meses</i></p>
<div class="panel panel-default">
    <div class="panel-heading">Seleccione la Fecha</div>
    <div class="panel-body">

        @using (Html.BeginForm("Reporte", "PenalizacionesAuditor", new { ViewBag.ReturnUrl }, FormMethod.Get, new { @id = "form-fecha", @class = "form-horizontal", role = "form" }))
        {

            @Html.ValidationSummary(true)

            <div class="">
                <label class="col-sm-2 control-label"> Fecha Desde</label>
                <div class="col-sm-3">
                    <input type="text" class="form-control" name="fechaDesde" id="fechaDesde" placeholder="Fecha" />
                </div>
                <label class="col-sm-2 control-label"> Fecha Hasta</label>
                <div class="col-sm-3">
                    <input type="text" class="form-control" name="fechaHasta" id="fechaHasta" placeholder="Fecha" />
                </div>
                <div class="col-sm-2">
                    <button class="btn btn-primary pull-right" type="submit"> <i class="fa fa-filter" aria-hidden="true"></i> Filtrar</button>

                </div>
            </div>

        }
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-heading">Lista de penalizaciones</div>
    <div class="panel-body">
        <div class="col-md-12">
            <div class="table-responsive">
                <table class="table table-striped table-condensed table-bordered" id="penalizacion">
                    <thead>
                        <tr>
                            <th class="text-center">Id</th>
                            <th class="text-center">Fecha Penalizacion</th>
                            <th class="text-center">Numero Proveedor</th>
                            <th class="text-center">Razon Social</th>
                            <th class="text-center">Marca</th>
                            <th class="text-center">Total Penalizacion</th>
                            <th class="text-center">auditor</th>
                            <th class="text-center">Penalizada</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var penalizaciones in penalizacion)
                        {
                            <tr>
                                <td>@penalizaciones.id</td>
                                <td>@penalizaciones.FechaPenalizacion</td>
                                <td>@penalizaciones.NumeroProveedor</td>
                                <td>@penalizaciones.RazonSocial</td>
                                <td>@penalizaciones.Marca</td>
                                <td>$@penalizaciones.Total.00</td>
                                <td>@penalizaciones.auditor</td>
                                <td>
                                    @if (penalizaciones.procesado == true)
                                    {
                                        <text>SI</text>
                                    }
                                    else
                                    {<text>NO</text>
                                }
                                </td>
                            </tr>

                        }
                    </tbody>
                </table>
                
            </div>
        </div>
    </div>
</div>

@section Scripts {
<script src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.flash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.html5.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.print.min.js"></script>
        
        
        <script type="text/javascript">


            $(document).ready(function () {
                $('#fechaDesde').datetimepicker({
            locale: 'es',
            format: 'DD/MM/YYYY',
            defaultDate: "@fechaDesde.ToString("yyyyMMdd")"
        });
        $('#fechaHasta').datetimepicker({
            locale: 'es',
            format: 'DD/MM/YYYY',
            defaultDate: "@fechaHasta.ToString("yyyyMMdd")"
                });


                $('#penalizacion').dataTable({
                    "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "Todos"]],
                    "language": {
                        "url": "https://cdn.datatables.net/plug-ins/1.10.13/i18n/Spanish.json",
                    },
                    dom: 'Bfrtip',
                    buttons: [
                        'pageLength', 'copy', 'csv', 'excel', 'pdf', 'print'
                    ]
                });

            $('#fecha').datetimepicker({
                locale: 'es',
                format: 'DD/MM/YYYY',
                defaultDate: new Date()
            });
        });
</script>

}